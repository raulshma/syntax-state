# OAuth 2.0 & OpenID Connect

Let&apos;s learn how "Login with Google/Microsoft/Facebook" actually works! 

## The Problem OAuth Solves

Imagine you&apos;re at a hotel  and want to use the valet parking service:

**Without OAuth (Bad!):**
> "Here are my car keys AND my home address!" â€ï¸

**With OAuth (Good!):**
> "Here&apos;s a valet ticket that ONLY lets you park my car." 

OAuth works the same way â€” you give apps **limited access** without sharing your password!

## What&apos;s the Difference?

| OAuth 2.0 | OpenID Connect (OIDC) |
|-----------|----------------------|
| **Authorization** | **Authentication** |
| "What can you access?" | "Who are you?" |
| Grants permissions | Verifies identity |
| Returns Access Token | Returns ID Token + Access Token |

<InfoBox type="tip">
  **OpenID Connect = OAuth 2.0 + Identity Layer**
  
  OIDC builds on top of OAuth to add user identity information!
</InfoBox>

## The Key Players

| Actor | Role | Example |
|-------|------|---------|
| **Resource Owner** | You (the user) | You, logging in |
| **Client** | The app requesting access | Your web app |
| **Authorization Server** | Issues tokens | Google, Azure AD |
| **Resource Server** | Holds protected data | Google Drive API |

## See It In Action

<AuthFlowDiagram mode="beginner" flowType="oauth-code" />

The flow makes more sense with an example:

### "Login with Google" Step by Step

1.  **You click "Login with Google"**
   - Your app redirects you to Google

2.  **You log in to Google**
   - You enter YOUR credentials on Google&apos;s site
   - Your app never sees your password!

3.  **You approve permissions**
   - "Allow App to access your email and profile?"

4.  **Google sends a code back**
   - This code is temporary and one-time use

5.  **Your app exchanges the code**
   - App sends code + secret to Google
   - Gets back Access Token + ID Token

6.  **You&apos;re logged in!**
   - App knows who you are from the ID Token
   - App can access your data with Access Token

## The Tokens You Get

### ID Token (OIDC)
Contains information about **who you are**:
```json
{
  "sub": "123456789",
  "name": "John Doe",
  "email": "john@gmail.com",
  "picture": "https://..."
}
```

### Access Token (OAuth)
Used to **access resources**:
```
Authorization: Bearer eyJhbGciOiJSUzI1NiIs...
```

<InfoBox type="warning">
  The **Access Token** is for APIs. The **ID Token** contains user info. Don&apos;t confuse them!
</InfoBox>

## Common OAuth Flows

| Flow | Use Case | Security |
|------|----------|----------|
| **Authorization Code** | Web apps with backend |  Most secure |
| **Authorization Code + PKCE** | SPAs, mobile apps |  Secure for public clients |
| **Implicit** | Legacy SPAs |  Deprecated |
| **Client Credentials** | Server-to-server | For machines only |

## Key Takeaways

-  **OAuth is valet parking** â€” give limited access, not your keys
- ðŸ†” **OIDC adds identity** â€” OAuth + "who is this user?"
-  **Your password stays with the provider** â€” apps never see it
-  **You get tokens** â€” ID Token (who) + Access Token (permissions)
-  **Authorization Code flow** is the most secure for web apps

<ProgressCheckpoint section="oauth-intro" xpReward={30} />
