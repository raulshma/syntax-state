# ASP.NET Core Identity

Welcome to the world of user authentication!  Let's learn how to manage users in your web applications.

## What is ASP.NET Core Identity?

Imagine you're running a **hotel** . You need to:

- **Register guests** (create accounts)
- **Verify their identity** (check ID at check-in)
- **Give them room keys** (login sessions)
- **Manage access levels** (regular room vs. VIP suite)

**ASP.NET Core Identity is like the hotel's front desk system** — it handles all of this for your web app!

<InfoBox type="tip">
  Identity does the hard stuff for you: password hashing, account lockouts, two-factor auth, and more!
</InfoBox>

## The Key Players

<IdentityArchitectureVisualizer mode="beginner" scenario="overview" />

| Service | What It Does | Hotel Analogy |
|---------|--------------|---------------|
| **UserManager** | Creates users, manages passwords | Reception desk staff |
| **SignInManager** | Handles login/logout | Key card system |
| **RoleManager** | Manages roles (Admin, User) | VIP membership system |

## How Registration Works

Let's see what happens when a new user signs up:

<IdentityArchitectureVisualizer mode="beginner" scenario="registration" />

The flow is simple:
1.  User fills out the registration form
2.  Password is **hashed** (scrambled) — never stored as plain text!
3.  User record is saved to the database
4.  Success! User can now log in

## How Login Works

<IdentityArchitectureVisualizer mode="beginner" scenario="login" />

When you log in:
1. Enter your email and password
2. Identity finds your account
3. Compares your password hash
4. Gives you a **cookie** (a digital wristband!)
5. You're authenticated! 

<InfoBox type="note">
  The cookie is encrypted — nobody can read what's inside except your server.
</InfoBox>

## Adding Identity to Your App

It's surprisingly easy! Just two steps:

```csharp
// Step 1: In Program.cs, add Identity services
builder.Services.AddIdentity<IdentityUser, IdentityRole>()
    .AddEntityFrameworkStores<ApplicationDbContext>()
    .AddDefaultTokenProviders();

// Step 2: Add authentication middleware
app.UseAuthentication();
app.UseAuthorization();
```

That's it! Identity is now ready to manage your users.

## The Identity Database

Identity creates these tables automatically:

| Table | What It Stores |
|-------|---------------|
| **AspNetUsers** | User accounts (email, password hash) |
| **AspNetRoles** | Role definitions (Admin, Editor) |
| **AspNetUserRoles** | Which users have which roles |
| **AspNetUserClaims** | Custom claims about users |

<InfoBox type="warning">
  Never try to read password hashes or create users by inserting rows manually — always use UserManager!
</InfoBox>

## Key Takeaways

-  **Identity = Hotel front desk** for your web app
-  **Passwords are always hashed** — never stored as plain text
-  **Login creates an encrypted cookie** for session management
-  **Identity creates database tables** automatically
-  **Two lines of code** to add to your app!

<ProgressCheckpoint section="identity-intro" xpReward={30} />
