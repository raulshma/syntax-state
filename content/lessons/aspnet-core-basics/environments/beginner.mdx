# Environments (Dev, Staging, Prod)

Your app behaves differently depending on where it's running. ASP.NET Core has built-in support for this through **environments**!

---

## Section 1: Environment Basics

### The Three Stages

<EnvironmentSwitcher mode="beginner" />

| Environment | Where | Who Sees It | Error Details |
|:------------|:------|:------------|:--------------|
| **Development** | Your computer | Just you | Full details |
| **Staging** | Test server | Your team | Some details |
| **Production** | Live server | Real users | Friendly messages |

### Why Different Environments?

- **Development**: Show all errors, use test data
- **Production**: Hide errors, use real data, be secure

<ProgressCheckpoint section="env-basics" xpReward={8} />

---

## Section 2: Using Environments

### Checking the Environment

```csharp
var builder = WebApplication.CreateBuilder(args);
var app = builder.Build();

if (app.Environment.IsDevelopment())
{
    app.UseSwagger();
    app.UseDeveloperExceptionPage();
}

if (app.Environment.IsProduction())
{
    app.UseExceptionHandler("/Error");
    app.UseHsts();
}
```

### Setting the Environment

**In launchSettings.json:**
```json
{
  "profiles": {
    "Development": {
      "environmentVariables": {
        "ASPNETCORE_ENVIRONMENT": "Development"
      }
    }
  }
}
```

**Via command line:**
```bash
ASPNETCORE_ENVIRONMENT=Production dotnet run
```

<ProgressCheckpoint section="env-intermediate" xpReward={8} />

---

## Section 3: Environment-Specific Configuration

### Config File Loading Order

ASP.NET Core automatically loads:
1. `appsettings.json` (always)
2. `appsettings.{Environment}.json` (if exists)

### Example

**appsettings.json:**
```json
{ "ApiUrl": "https://api.example.com" }
```

**appsettings.Development.json:**
```json
{ "ApiUrl": "https://localhost:5001" }
```

In Development, `ApiUrl` = `https://localhost:5001`
In Production, `ApiUrl` = `https://api.example.com`

### Key Takeaways

<InfoBox type="tip">
**Remember:**
- Use `IsDevelopment()`, `IsProduction()` to check environment
- Set via `ASPNETCORE_ENVIRONMENT` variable
- Config files are loaded based on environment
</InfoBox>

<ProgressCheckpoint section="env-advanced" xpReward={4} />
