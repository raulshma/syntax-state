# Working with Arrays and Objects

Welcome back! Now that you know the basics, let's dive into more powerful array methods and object manipulation techniques that professional developers use daily.

<InfoBox type="tip" title="Level Up Your Skills">
The methods in this lesson â€” especially `.reduce()` â€” are interview favorites. Master them, and you'll be able to solve complex data transformation problems elegantly!
</InfoBox>

<ProgressCheckpoint section="introduction" xpReward={20} />

## The Mighty .reduce()

`.reduce()` is the Swiss Army knife of array methods. It can do anything the other methods can do, and more!

```javascript
// Basic reduce: sum all numbers
const numbers = [1, 2, 3, 4, 5];

const sum = numbers.reduce((accumulator, current) => {
  return accumulator + current;
}, 0); // 0 is the initial value

console.log(sum); // 15
```

<KeyConcept title="How .reduce() Works">
1. Start with an initial value (the accumulator)
2. For each item, run the callback
3. The callback returns the new accumulator value
4. After all items, return the final accumulator
</KeyConcept>

### Practical .reduce() Examples

```javascript
// Count occurrences
const fruits = ['apple', 'banana', 'apple', 'cherry', 'banana', 'apple'];

const counts = fruits.reduce((acc, fruit) => {
  acc[fruit] = (acc[fruit] || 0) + 1;
  return acc;
}, {});

console.log(counts);
// { apple: 3, banana: 2, cherry: 1 }
```

```javascript
// Group by property
const people = [
  { name: 'Alice', department: 'Engineering' },
  { name: 'Bob', department: 'Marketing' },
  { name: 'Charlie', department: 'Engineering' },
];

const byDepartment = people.reduce((acc, person) => {
  const dept = person.department;
  if (!acc[dept]) acc[dept] = [];
  acc[dept].push(person);
  return acc;
}, {});

console.log(byDepartment);
// { Engineering: [...], Marketing: [...] }
```

<ArrayMethodVisualizer method="reduce" />

<ProgressCheckpoint section="array-basics" xpReward={20} />

## Sorting Arrays

The `.sort()` method sorts arrays in place. By default, it converts items to strings and sorts alphabetically.

```javascript
// Default sort (alphabetical)
const letters = ['c', 'a', 'b'];
letters.sort();
console.log(letters); // ['a', 'b', 'c']

// âš ï¸ Numbers don't sort correctly by default!
const nums = [10, 2, 30, 1];
nums.sort();
console.log(nums); // [1, 10, 2, 30] - Wrong!
```

### Custom Sort Functions

```javascript
// Sort numbers correctly
const numbers = [10, 2, 30, 1];

// Ascending order
numbers.sort((a, b) => a - b);
console.log(numbers); // [1, 2, 10, 30]

// Descending order
numbers.sort((a, b) => b - a);
console.log(numbers); // [30, 10, 2, 1]
```

```javascript
// Sort objects by property
const users = [
  { name: 'Charlie', age: 30 },
  { name: 'Alice', age: 25 },
  { name: 'Bob', age: 35 },
];

// Sort by age
users.sort((a, b) => a.age - b.age);
// [{ name: 'Alice', age: 25 }, { name: 'Charlie', age: 30 }, ...]

// Sort by name
users.sort((a, b) => a.name.localeCompare(b.name));
// [{ name: 'Alice', ... }, { name: 'Bob', ... }, { name: 'Charlie', ... }]
```

<InfoBox type="warning" title="Sort Mutates!">
Unlike `.map()` and `.filter()`, `.sort()` modifies the original array. Use `[...array].sort()` to sort a copy instead.
</InfoBox>

<ProgressCheckpoint section="array-methods" xpReward={20} />

## Spread Operator Magic

The spread operator (`...`) is incredibly useful for working with arrays and objects.

### With Arrays

```javascript
// Copy an array
const original = [1, 2, 3];
const copy = [...original];

// Combine arrays
const arr1 = [1, 2];
const arr2 = [3, 4];
const combined = [...arr1, ...arr2]; // [1, 2, 3, 4]

// Add items
const withMore = [...original, 4, 5]; // [1, 2, 3, 4, 5]
```

### With Objects

```javascript
// Copy an object
const user = { name: 'Alice', age: 25 };
const userCopy = { ...user };

// Merge objects
const defaults = { theme: 'light', language: 'en' };
const preferences = { theme: 'dark' };
const settings = { ...defaults, ...preferences };
// { theme: 'dark', language: 'en' }

// Add/override properties
const updated = { ...user, age: 26, city: 'NYC' };
// { name: 'Alice', age: 26, city: 'NYC' }
```

<KeyConcept title="Spread Creates Shallow Copies">
The spread operator only copies one level deep. Nested objects/arrays are still references to the original!
</KeyConcept>

<MethodChainingPlayground />

<ProgressCheckpoint section="method-chaining" xpReward={20} />

## Object Methods

JavaScript provides useful methods for working with objects.

### Object.keys(), Object.values(), Object.entries()

```javascript
const product = {
  name: 'Laptop',
  price: 999,
  inStock: true
};

// Get all keys
console.log(Object.keys(product));
// ['name', 'price', 'inStock']

// Get all values
console.log(Object.values(product));
// ['Laptop', 999, true]

// Get key-value pairs
console.log(Object.entries(product));
// [['name', 'Laptop'], ['price', 999], ['inStock', true]]
```

### Iterating Over Objects

```javascript
const scores = { alice: 95, bob: 87, charlie: 92 };

// Using Object.entries() with forEach
Object.entries(scores).forEach(([name, score]) => {
  console.log(`${name}: ${score}`);
});

// Using Object.entries() with map
const formatted = Object.entries(scores)
  .map(([name, score]) => `${name}: ${score}`)
  .join(', ');
// 'alice: 95, bob: 87, charlie: 92'
```

### Object.assign() and Object.fromEntries()

```javascript
// Merge objects (alternative to spread)
const merged = Object.assign({}, obj1, obj2);

// Convert entries back to object
const entries = [['a', 1], ['b', 2]];
const obj = Object.fromEntries(entries);
// { a: 1, b: 2 }
```

<ObjectExplorer />

<ProgressCheckpoint section="object-basics" xpReward={20} />

## Destructuring

Destructuring lets you extract values from arrays and objects into variables.

### Array Destructuring

```javascript
const colors = ['red', 'green', 'blue'];

// Extract values
const [first, second, third] = colors;
console.log(first);  // 'red'
console.log(second); // 'green'

// Skip values
const [, , last] = colors;
console.log(last); // 'blue'

// Rest pattern
const [head, ...rest] = colors;
console.log(head); // 'red'
console.log(rest); // ['green', 'blue']
```

### Object Destructuring

```javascript
const user = {
  name: 'Alice',
  age: 25,
  email: 'alice@example.com'
};

// Extract properties
const { name, age } = user;
console.log(name); // 'Alice'
console.log(age);  // 25

// Rename variables
const { name: userName, email: userEmail } = user;
console.log(userName);  // 'Alice'
console.log(userEmail); // 'alice@example.com'

// Default values
const { phone = 'N/A' } = user;
console.log(phone); // 'N/A'
```

<ProgressCheckpoint section="object-methods" xpReward={20} />

## Practical Patterns

### Transform Array to Object

```javascript
const users = [
  { id: 1, name: 'Alice' },
  { id: 2, name: 'Bob' },
];

// Create lookup object by ID
const usersById = users.reduce((acc, user) => {
  acc[user.id] = user;
  return acc;
}, {});

console.log(usersById[1]); // { id: 1, name: 'Alice' }
```

### Filter and Transform in One Pass

```javascript
const products = [
  { name: 'Laptop', price: 999, inStock: true },
  { name: 'Phone', price: 699, inStock: false },
  { name: 'Tablet', price: 499, inStock: true },
];

// Get names of in-stock products
const available = products
  .filter(p => p.inStock)
  .map(p => p.name);
// ['Laptop', 'Tablet']
```

<ProgressCheckpoint section="summary" xpReward={10} />

## Quick Quiz

<Quiz>
  <Question text="What does .reduce() return?">
    <Answer>Always an array</Answer>
    <Answer>Always an object</Answer>
    <Answer correct>A single value (can be any type)</Answer>
    <Answer>The original array</Answer>
  </Question>
  
  <Question text="How do you sort numbers in ascending order?">
    <Answer>numbers.sort()</Answer>
    <Answer correct>numbers.sort((a, b) => a - b)</Answer>
    <Answer>numbers.sort((a, b) => b - a)</Answer>
    <Answer>numbers.sortAsc()</Answer>
  </Question>
  
  <Question text="What does Object.entries() return?">
    <Answer>An array of keys</Answer>
    <Answer>An array of values</Answer>
    <Answer correct>An array of [key, value] pairs</Answer>
    <Answer>A new object</Answer>
  </Question>
  
  <Question text="What does the spread operator (...) do with objects?">
    <Answer>Deletes all properties</Answer>
    <Answer correct>Creates a shallow copy</Answer>
    <Answer>Creates a deep copy</Answer>
    <Answer>Converts to array</Answer>
  </Question>
</Quiz>

---

**Excellent work!** ðŸŽ‰ You've mastered intermediate array and object techniques. In the advanced level, we'll explore immutable patterns, WeakMap/WeakSet, and functional programming approaches!
