# Implementing OpenAPI/Swagger in ASP.NET Core

Let's learn how to set up, configure, and enhance Swagger documentation in your .NET APIs.

## Section 1: Installation & Basic Setup Ô∏è

### Step 1: Install Swashbuckle

```bash
dotnet add package Swashbuckle.AspNetCore
```

<ProgressCheckpoint section="installation" xpReward={3} />

### Step 2: Configure Services

```csharp
var builder = WebApplication.CreateBuilder(args);

builder.Services.AddControllers();
builder.Services.AddEndpointsApiExplorer();
builder.Services.AddSwaggerGen();

var app = builder.Build();

if (app.Environment.IsDevelopment())
{
    app.UseSwagger();      // Generates /swagger/v1/swagger.json
    app.UseSwaggerUI();    // Generates /swagger/index.html
}

app.MapControllers();
app.Run();
```

<ProgressCheckpoint section="basic-setup" xpReward={5} />

### Step 3: Test It!

Run your application and navigate to:
```
https://localhost:5001/swagger
```

<ProgressCheckpoint section="first-run" xpReward={2} />

### Adding Response Type Information

```csharp
[HttpGet("{id}")]
[ProducesResponseType(StatusCodes.Status200OK, Type = typeof(ProductDto))]
[ProducesResponseType(StatusCodes.Status404NotFound)]
public IActionResult GetById(int id)
{
    var product = _repository.GetById(id);
    if (product == null) return NotFound();
    return Ok(product);
}
```

<ProgressCheckpoint section="basic-docs" xpReward={3} />

<ProgressCheckpoint section="response-types" xpReward={2} />

---

## Section 2: XML Comments & Rich Documentation 

### Enable XML Documentation

Edit your `.csproj` file:

```xml
<PropertyGroup>
  <GenerateDocumentationFile>true</GenerateDocumentationFile>
  <NoWarn>$(NoWarn);1591</NoWarn>
</PropertyGroup>
```

<ProgressCheckpoint section="xml-setup" xpReward={2} />

### Configure Swagger to Use XML Comments

```csharp
builder.Services.AddSwaggerGen(options =>
{
    var xmlFilename = $"{Assembly.GetExecutingAssembly().GetName().Name}.xml";
    options.IncludeXmlComments(Path.Combine(AppContext.BaseDirectory, xmlFilename));
});
```

<ProgressCheckpoint section="xml-config" xpReward={2} />


### Add XML Comments to Your Code

```csharp
/// <summary>
/// Retrieves a specific product by ID
/// </summary>
/// <param name="id">The unique identifier of the product</param>
/// <returns>The requested product</returns>
/// <response code="200">Returns the product</response>
/// <response code="404">If the product is not found</response>
[HttpGet("{id}")]
[ProducesResponseType(StatusCodes.Status200OK, Type = typeof(ProductDto))]
[ProducesResponseType(StatusCodes.Status404NotFound)]
public IActionResult GetById(int id)
{
    var product = _repository.GetById(id);
    if (product == null) return NotFound();
    return Ok(product);
}
```

<ProgressCheckpoint section="xml-comments" xpReward={5} />

---

## Section 3: Customization & Best Practices 

### Add API Information

```csharp
builder.Services.AddSwaggerGen(options =>
{
    options.SwaggerDoc("v1", new OpenApiInfo
    {
        Version = "v1",
        Title = "Product API",
        Description = "An ASP.NET Core Web API for managing products",
        Contact = new OpenApiContact
        {
            Name = "Support Team",
            Email = "support@example.com"
        }
    });
});
```

<ProgressCheckpoint section="api-info" xpReward={3} />

### Organize Endpoints with Tags

```csharp
[ApiController]
[Route("api/[controller]")]
[Tags("Products")]
public class ProductsController : ControllerBase { }
```

<ProgressCheckpoint section="tags" xpReward={2} />

### Add Example Values

```csharp
public class CreateProductDto
{
    /// <summary>The product name</summary>
    /// <example>Wireless Mouse</example>
    [Required]
    public string Name { get; set; }
    
    /// <summary>The product price in USD</summary>
    /// <example>29.99</example>
    [Required]
    public decimal Price { get; set; }
}
```

<ProgressCheckpoint section="examples" xpReward={2} />

### Data Annotations for Validation

```csharp
public class CreateUserDto
{
    [Required]
    [StringLength(100, MinimumLength = 2)]
    public string Name { get; set; }
    
    [Required]
    [EmailAddress]
    public string Email { get; set; }
    
    [Range(18, 120)]
    public int Age { get; set; }
}
```

Swagger automatically shows validation rules!

<ProgressCheckpoint section="validation" xpReward={2} />

### Multiple API Versions

```csharp
builder.Services.AddSwaggerGen(options =>
{
    options.SwaggerDoc("v1", new OpenApiInfo { Title = "My API v1" });
    options.SwaggerDoc("v2", new OpenApiInfo { Title = "My API v2" });
});

app.UseSwaggerUI(options =>
{
    options.SwaggerEndpoint("/swagger/v1/swagger.json", "V1");
    options.SwaggerEndpoint("/swagger/v2/swagger.json", "V2");
});
```

<ProgressCheckpoint section="versioning" xpReward={2} />

### Excluding Endpoints

```csharp
[HttpGet("internal")]
[ApiExplorerSettings(IgnoreApi = true)]
public IActionResult InternalEndpoint()
{
    return Ok("Internal");
}
```

<ProgressCheckpoint section="excluding" xpReward={2} />

<ProgressCheckpoint section="integration" xpReward={5} />
