# Structured Logging: Turning Logs into Data 

Would you rather search through:
-  Thousands of text lines: `"[2025-12-15 14:30:00] User 12345 failed to login with IP 192.168.1.100"`
-  Queryable data: `SELECT * FROM logs WHERE UserId = 12345 AND Level = 'Error'`

Structured logging turns logs from unsearchable text into **queryable data**!

## What is Structured Logging?

Traditional logging creates **unstructured text**:
```
[INFO] User john@example.com logged in from 192.168.1.100 at 2025-12-15 14:30:00
```

Structured logging creates **machine-readable data**:
```json
{
  "Level": "Information",
  "Timestamp": "2025-12-15T14:30:00Z",
  "UserEmail": "john@example.com",
  "IpAddress": "192.168.1.100",
  "Action": "login"
}
```

<KeyConcept title="The Power of Structure">
With structured logs, you can answer questions like:
- Which users failed to login today?
- What's the average response time by endpoint?
- How many orders were processed per hour?
- What errors are increasing in frequency?
</KeyConcept>

<ProgressCheckpoint section="structured-vs-unstructured" xpReward={10} />

## Why Structured Logging Matters

### Traditional Logging Problems

```csharp
// ❌ Unstructured - hard to analyze
_logger.LogInformation("[INFO] Processing order #12345 for customer john@example.com ($49.99)");

// Problems:
// - Can't easily count orders
// - Can't group by customer
// - Can't sum amounts
// - Hard to correlate events
```

### Structured Logging Benefits

```csharp
// ✅ Structured - easy to analyze
_logger.LogInformation(
    "Processing order {OrderId} for customer {CustomerEmail} (${Amount})",
    12345,
    "john@example.com",
    49.99
);

// Now you can:
// - COUNT orders by OrderId
// - GROUP customers by CustomerEmail
// - SUM totals by Amount
// - CORRELATE with other events
```

<ProgressCheckpoint section="querying-analyzing" xpReward={8} />

## Message Templates Explained

The secret sauce of structured logging is **message templates**:

```csharp
// Template: "Processing {count} {itemType} for ${amount}"
// Properties: count=5, itemType="widgets", amount=24.95

_logger.LogInformation(
    "Processing {count} {itemType} for ${amount}",
    5,
    "widgets",
    24.95
);
```

### Property Naming Best Practices

| Good Names | Bad Names | Why |
|------------|-----------|-----|
| `OrderId` | `id` | Clear context |
| `CustomerEmail` | `email` | Avoid ambiguity |
| `HttpStatusCode` | `code` | Specific meaning |
| `ProcessingTimeMs` | `time` | Units specified |

### Capturing Complex Objects

```csharp
var order = new Order
{
    Id = 12345,
    Customer = new Customer { Name = "John", Email = "john@example.com" },
    Items = new[] { "Widget A", "Widget B" }
};

// @ operator: Destructure the object
_logger.LogInformation("Order created: {@Order}", order);

// $ operator: Convert to string
_logger.LogInformation("Order summary: {$Order}", order);
```

<ProgressCheckpoint section="observability-patterns" xpReward={7} />

## Real-World Benefits

### Security Monitoring

```csharp
// Detect brute force attacks
_logger.LogWarning(
    "Failed login attempt for user {Username} from IP {IpAddress} (Attempt #{AttemptNumber})",
    username,
    ipAddress,
    attemptNumber
);

// Query: Show all IPs with >5 failed attempts in 1 minute
```

### Business Analytics

```csharp
_logger.LogInformation(
    "Purchase completed: {ProductId} x{Quantity} for ${Amount} by customer {CustomerId}",
    productId,
    quantity,
    amount,
    customerId
);

// Query: Revenue by product, customers by purchase frequency, etc.
```

### Performance Monitoring

```csharp
_logger.LogInformation(
    "API endpoint {Endpoint} took {DurationMs}ms with status {StatusCode}",
    endpoint,
    durationMs,
    statusCode
);

// Query: Slow endpoints, error rates, response time trends
```

## Tools That Work with Structured Logs

| Tool | Purpose | Benefit |
|------|---------|---------|
| **Seq** | Local log viewer | Visual querying |
| **ELK Stack** | Centralized logging | Powerful analytics |
| **Azure Monitor** | Cloud monitoring | Integrated alerts |
| **Splunk** | Enterprise SIEM | Security analysis |
| **Grafana** | Dashboards | Visual metrics |

<InfoBox type="tip">
**Quick Start**: Use **Seq** (free for development) to visualize your structured logs immediately!
</InfoBox>

## Key Takeaways

 Structured logs are queryable data, not just text
 Use message templates with named properties: `{PropertyName}`
 Destructure complex objects with `@` operator
 Capture business and operational metrics
 Enable powerful querying and analytics

<InfoBox type="success">
You now understand why structured logging is essential for modern applications! You can implement patterns that turn logs into actionable insights.
</InfoBox>
